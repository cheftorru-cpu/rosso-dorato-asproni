  let m=g.data.slice(0,7);
  if(!mappa[m]) mappa[m]={inc:0,sp:0};
  mappa[m].inc+=g.cont+g.pos+g.sat;
  mappa[m].sp+=g.food+g.non+g.extra;
 });

 riepilogoMesi.innerHTML = Object.keys(mappa)
 .sort().map(m=>{
  let u=mappa[m].inc-mappa[m].sp;
  return `
  <div class="monthSum">
   <b>${m}</b> → Incassi ${mappa[m].inc}€ | Spese ${mappa[m].sp}€ | Utile ${u}€
  </div>`;
 }).join("");
}

function exportCSV(){
 let csv="Data,Contanti,POS,Satispay,Food,FornFood,NonFood,FornNon,Extra\n";
 dati.forEach(g=>{
  csv+=`${g.data},${g.cont},${g.pos},${g.sat},${g.food},${g.ffood},${g.non},${g.fnon},${g.extra}\n`;
 });
 let a=document.createElement("a");
 a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
 a.download="rosso_dorato.csv";
 a.click();
}

mesiDisponibili();
aggiorna();
riepilogoFineMese();
</script>

</body>
</html>
