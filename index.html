<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rosso Dorato â€“ Gestionale</title>
<style>
body{font-family:Arial;background:#f6f6f6;padding:15px}
h1{color:#8b0000}
.box{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,select{width:100%;padding:8px;margin-top:6px}
button{width:100%;padding:10px;margin-top:8px;font-size:16px;border:none;border-radius:6px}
.salva{background:#8b0000;color:#fff}
.chiudi{background:#000;color:#fff}
.exp{background:#006400;color:#fff}
.item{background:#eee;padding:6px;margin-top:5px;border-radius:4px}
</style>
</head>

<body>

<h1>Rosso Dorato â€“ Gestionale</h1>

ğŸ“… Data:
<input type="date" id="dataScelta">

<div class="box">
<h3>Incassi</h3>
<input id="contanti" type="number" placeholder="Contanti">
<input id="pos" type="number" placeholder="POS">
<input id="satis" type="number" placeholder="Satispay">
</div>

<div class="box">
<h3>Spese</h3>
<input id="food" type="number" placeholder="Spesa Food">
<input id="fornitoreFood" placeholder="Fornitore Food">
<input id="nonfood" type="number" placeholder="Spesa Non Food">
<input id="fornitoreNonFood" placeholder="Fornitore Non Food">
<input id="personale" type="number" placeholder="Extra personale">
</div>

<button class="salva" onclick="salvaGiornata()">ğŸ’¾ Salva giornata</button>
<button class="chiudi" onclick="chiudiMese()">ğŸŸ¥ Chiudi mese</button>

<div class="box">
<strong>Totali mese</strong><br>
Incassi: <span id="inc">0</span> â‚¬<br>
Spese: <span id="spe">0</span> â‚¬<br>
Utile: <span id="uti">0</span> â‚¬
</div>

<div class="box">
<h2>ğŸª Spese per fornitore (mese)</h2>
<div id="fornitori"></div>
</div>

<script>
dataScelta.value=new Date().toISOString().split("T")[0];
let giorni=JSON.parse(localStorage.getItem("giorni"))||[];

function salvaGiornata(){
 let d=new Date(dataScelta.value).toLocaleDateString("it-IT");
 if(giorni.some(g=>g.d===d)){alert("Giornata giÃ  inserita");return;}

 let inc=+contanti.value + +pos.value + +satis.value;
 let speFood=+food.value;
 let speNonFood=+nonfood.value;
 let spePers=+personale.value;
 let spe=speFood+speNonFood+spePers;

 giorni.push({
  d,inc,spe,uti:inc-spe,
  food:{v:speFood,f:fornitoreFood.value},
  nonfood:{v:speNonFood,f:fornitoreNonFood.value}
 });
 localStorage.setItem("giorni",JSON.stringify(giorni));
 aggiorna();
}

function chiudiMese(){
 if(!confirm("Chiudere il mese?"))return;
 giorni=[];
 localStorage.setItem("giorni","[]");
 aggiorna();
}

function aggiorna(){
 let i=0,s=0,u=0;
 let f={};
 giorni.forEach(g=>{
  i+=g.inc;s+=g.spe;u+=g.uti;
  if(g.food.v>0 && g.food.f){
    f[g.food.f]=(f[g.food.f]||0)+g.food.v;
  }
  if(g.nonfood.v>0 && g.nonfood.f){
    f[g.nonfood.f]=(f[g.nonfood.f]||0)+g.nonfood.v;
  }
 });
 inc.innerText=i; spe.innerText=s; uti.innerText=u;

 let h="";
 for(let k in f){h+=`<div class="item">${k} â†’ ${f[k]} â‚¬</div>`}
 fornitori.innerHTML=h || "Nessuna spesa inserita";
}
aggiorna();
</script>

</body>
</html>
